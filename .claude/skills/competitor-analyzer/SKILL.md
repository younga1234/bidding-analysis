---
name: competitor-analyzer
description: 경쟁업체 입찰 패턴 분석 및 AI 사용 여부 판단. 발주처투찰률별 완전 분리 분석, 5가지 AI 탐지 지표, 시각화 생성. 엔트로피, 소수점 패턴, 업체별 분산, 시간 추세, 이상치 탐지. Use when 경쟁업체 분석, AI 탐지, 패턴 분석
allowed-tools: Bash, Read, Write
---

# 경쟁업체 분석 Skill

## 개요

경쟁업체의 입찰 패턴을 발주처투찰률별로 완전 분리하여 분석하고, AI 분석 도구 사용 여부를 판단합니다.

## 트리거 키워드

사용자가 다음과 같이 요청하면 이 Skill이 자동으로 실행됩니다:

- "[업체명] 분석해줘"
- "[업체명] 입찰 패턴"
- "[업체명] AI 사용"
- "[업체명]을 분석하라"

**예시:**
- "해동문화재연구원 분석해줘"
- "동국문화재연구원 입찰 패턴"
- "중앙문화재연구원 AI 사용"

## 분석 내용

### 1. 발주처투찰률별 완전 분리 분석

각 발주처투찰률 그룹별로 완전히 독립적으로 분석:
- 데이터에서 발견된 모든 고유 발주처투찰률별로 분리
- 투찰률 값은 공고마다 다를 수 있음

**각 그룹별 통계:**
- 참여 건수
- 1위 횟수 및 비율
- 미달 횟수 및 비율
- 평균/중앙값/표준편차/범위
- 백분위수 (25%, 50%, 75%)
- 소수점 끝자리 분포

### 2. AI 사용 여부 판단 (5가지 지표)

| 지표 | 만점 | 측정 방법 |
|------|------|-----------|
| **소수점 패턴 전략성** | 10점 | Chi-square test로 특정 숫자 회피 패턴 탐지 (p<0.05) |
| **경쟁 밀도 회피** | 10점 | 발주처투찰률별 경쟁 밀도 낮은 구간 선택 비율 |
| **시간에 따른 학습** | 10점 | 초기 vs 후기 1위 확률 개선도, 정교도 향상 |
| **투찰률 정교함** | 10점 | 소수점 자릿수 사용 패턴 (10, 100, 1000단위) |
| **발주처별 차별화** | 10점 | 발주처투찰률별 평균 투찰률 차이 (3%+ = 만점) |

**판단 기준:**
- 35점 이상 (70%+): AI 분석 사용 가능성 매우 높음 ⚠️
- 25점 이상 (50%+): AI 분석 사용 가능성 높음
- 15점 이상 (30%+): AI 분석 사용 가능성 있음
- 15점 미만: AI 분석 사용 가능성 낮음

### 3. 시각화 생성

**상위 3개 발주처투찰률 그룹에 대해:**
- 히스토그램 (해당 업체 vs 전체 분포)
- 소수점 끝자리 분포
- 시계열 패턴 (있는 경우)

## 실행 프로세스

### STEP 1: 업체명 추출
사용자 요청에서 업체명을 추출합니다.

**예시:**
```
사용자: "해동문화재연구원 분석해줘"
→ 업체명: "해동문화재연구원"
```

### STEP 2: 스크립트 실행
```bash
cd /mnt/a/25
source venv/bin/activate
python .claude/skills/competitor-analyzer/analyze.py "업체명"
```

### STEP 3: 결과 확인
생성된 파일 확인:
- `/mnt/a/25/data분석/[업체명]_발주처별_분석.json`
- `/mnt/a/25/data분석/[업체명]_발주처별_분석_보고서.md`
- `/mnt/a/25/data분석/[업체명]_[투찰률]_분석.png` (3개)

### STEP 4: 결과 요약 및 보고
보고서 읽고 핵심 내용 요약:
- AI 사용 여부 판단 (점수 및 근거)
- 발주처투찰률별 주요 통계
- 강점 및 약점 분석
- 개선 제안 (필요 시)

## 출력 형식

### 📊 [업체명] 분석 완료

**🤖 AI 분석 사용 여부 판단**
- 종합 점수: XX/50 (XX%)
- 판단: [AI 분석 사용 가능성 매우 높음/높음/있음/낮음]

**🔍 5가지 지표 분석 결과**
| 지표 | 점수 | 판단 | 설명 |
|------|------|------|------|
| 소수점 패턴 전략 | X/10 | ... | ... |
| 경쟁 밀도 회피 | X/10 | ... | ... |
| 시간 학습 패턴 | X/10 | ... | ... |
| 투찰률 정교함 | X/10 | ... | ... |
| 발주처별 차별화 | X/10 | ... | ... |

**📈 발주처투찰률별 상세 통계**
| 발주처투찰률 | 참여 | 1위 | 미달 | 평균 투찰률 | 중앙값 | 표준편차 |
|-------------|------|-----|------|------------|--------|----------|
| ... | ... | ... | ... | ... | ... | ... |

**🎯 핵심 발견사항**
- [강점 1]
- [강점 2]
- [약점 1]
- [약점 2]

**📁 생성된 파일**
- [파일 경로 리스트]

## 중요 사항

### ⚠️ 필수 확인

1. **데이터 파일 존재 확인**
   - `/mnt/a/25/data전처리완료/전체_통합_데이터.xlsx` 파일 존재 필수
   - 전처리가 안 되어 있으면 먼저 `data-preprocessing` Skill 실행

2. **업체명 정확성**
   - 데이터에 존재하는 정확한 업체명 사용
   - 띄어쓰기, 철자 확인 필수
   - 예: "해동문화재연구원" (O), "해동 문화재 연구원" (X)

3. **가상환경 활성화**
   - Python 가상환경 `/mnt/a/25/venv/` 활성화 필수
   - 필요 라이브러리: pandas, numpy, scipy, matplotlib

### 🔄 다른 Skill과의 관계

**선행 Skill:**
- `data-preprocessing`: 전처리 파일 생성 (최초 1회)

**연관 Skill:**
- `bidding-master-pipeline`: 전체 입찰 분석 (우리 회사 관점)
- `bidding-advanced-analyzer`: 고급 분석 (시간대별, 발주처별, 2D)

**후속 작업:**
- 분석 결과를 바탕으로 우리 회사 전략 수립 가능
- 여러 업체 비교 분석 가능

## 에러 처리

### KeyError: '업체명'
**원인:** 해당 업체명이 데이터에 없음
**해결:**
1. 업체명 철자 확인
2. `전체_통합_데이터.xlsx`에서 정확한 업체명 확인

### FileNotFoundError: 전체_통합_데이터.xlsx
**원인:** 전처리 파일 없음
**해결:** `data-preprocessing` Skill 먼저 실행

### ModuleNotFoundError
**원인:** 필요 라이브러리 미설치
**해결:**
```bash
source venv/bin/activate
pip install pandas numpy scipy matplotlib openpyxl
```

## 사용 예시

### 예시 1: 단일 업체 분석
```
사용자: 해동문화재연구원 분석해줘

→ Skill 자동 실행
→ AI 점수 39/50 (78%) - 매우 높음
→ 발주처투찰률별 통계 제시
→ 시각화 3개 생성
```

### 예시 2: 우리 회사 분석
```
사용자: 동국문화재연구원 분석해줘

→ Skill 자동 실행
→ AI 점수 14/50 (28%) - 낮음
→ 개선 영역 제안
```

### 예시 3: 여러 업체 연속 분석
```
사용자: 해동문화재연구원, 중앙문화재연구원, 한백문화재연구원 분석해줘

→ 각 업체별로 Skill 실행
→ 비교 분석표 제시
```

## 데이터 신뢰도

**그룹별 최소 데이터 요구:**
- 과거 1위 데이터 36건 이상: 신뢰도 높음 ✅
- 과거 1위 데이터 10~35건: 신뢰도 중간 ⚠️
- 과거 1위 데이터 10건 미만: 신뢰도 낮음 ❌

**참고:** 전체 참여 데이터는 충분해도 (100건+) 1위 데이터가 부족하면 AI 판단 정확도가 낮아질 수 있습니다.

## 최종 출력

모든 분석 완료 후, 다음 정보를 사용자에게 제시:

1. ✅ AI 사용 여부 종합 판단
2. 📊 발주처투찰률별 핵심 통계 테이블
3. 🔍 강점 및 약점 분석
4. 💡 개선 제안 (필요 시)
5. 📁 생성된 파일 경로

═══

**⚠️ 이 Skill은 과거 데이터 기반 통계 분석이며, 최종 입찰 결정은 사용자의 판단과 책임입니다.**
