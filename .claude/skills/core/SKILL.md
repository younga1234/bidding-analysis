---
name: bidding-core
description: |
  [핵심 개념 정의] 나라장터 복수예가입찰의 모든 용어, 공식, 계산 원리를 정의합니다.

  포함 내용:
  - 용어 정의: 사정률, 기초대비투찰률, 예가대비투찰률, 발주처투찰률
  - 공식: 낙찰하한가, 예정가격, 기초금액 관계식
  - 복수예가 구조: 15C4=1,365 무작위성, ±3% 범위
  - AI 분석 방법론: 왜 기초대비투찰률을 사용해야 하는가
  - 몬테카를로 시뮬레이션 개념
  - 데이터 저장 형식: 사정률 100+실제값

  Use when: 입찰 분석 시작 전 개념 확인, 용어 혼동 발생 시
  THIS IS THE SINGLE SOURCE OF TRUTH. (project)
---

# 나라장터 복수예가입찰 용어 정의 - 영구 기록

## ⚠️ 중요: 이 문서가 모든 용어의 최종 정의입니다

### 1. 사정률 (Assessment Rate)
- **정의**: 예정가격이 기초금액보다 얼마나 높거나 낮은지 나타내는 비율
- **계산**: `(예정가격 - 기초금액) / 기초금액 × 100`
- **특징**: **공고 전체 동일값** (모든 업체가 같은 값)
- **범위**: -2% ~ +2%
- **예시**:
  - 기초금액: 281,000,000원
  - 예정가격: 281,520,600원
  - 사정률: 0.18526%

### 2. 기초대비사정률(%) (Base-to-Assessment Rate)
- **정의**: 각 업체의 개별 투찰과 관련된 계산값
- **특징**: **업체마다 다른 값**
- **실제 데이터**: 100.279%, 100.436%, 100.633% (업체별로 다름)
- **중요**: 이것은 공고 전체 동일값이 아닙니다!

### 3. 기초대비투찰률(%) (Base-to-Bid Rate)
- **정의**: 업체의 투찰금액을 기초금액으로 나눈 비율
- **계산**: `(투찰금액 / 기초금액) × 100`
- **특징**: **업체마다 다른 값**
- **예시**: 80.719%, 80.845%, 81.004% (업체별)

### 4. 예가대비투찰률(%) (Reserve-to-Bid Rate)
- **정의**: 업체의 투찰금액을 예정가격으로 나눈 비율
- **계산**: `(투찰금액 / 예정가격) × 100`
- **특징**: **업체마다 다른 값**
- **예시**: 80.569%, 80.696%, 80.854% (업체별)

### 5. 낙찰하한율 (Minimum Winning Rate)
- **정의**: 발주처가 정한 최저 낙찰 가능 비율
- **특징**: **발주처별로 다름**
- **값**:
  - 조달청/경상남도: 80.495%
  - 국가유산진흥원: 86.745%
  - 한국문화재재단: 87.745%
  - 문화재청: 88.000%

### 6. 낙찰하한가 (Minimum Winning Price)
- **정의**: 낙찰 가능한 최저 금액
- **계산**: `예정가격 × (낙찰하한율 / 100)`
- **특징**: 이 금액 미만은 모두 미달

### 7. 투찰률 (Bid Rate)
- **주의**: 문맥에 따라 다른 의미
- **일반적으로**: 기초대비투찰률을 의미
- **때로는**: 낙찰하한율을 의미 (파일에 따라 다름)

## 📊 요약 표

| 용어 | 공고 전체 동일 | 업체별 다름 | 발주처별 다름 |
|-----|--------------|------------|--------------|
| 사정률 | ✅ | | |
| 기초대비사정률(%) | | ✅ | |
| 기초대비투찰률(%) | | ✅ | |
| 예가대비투찰률(%) | | ✅ | |
| 낙찰하한율 | | | ✅ |
| 낙찰하한가 | ✅ | | |
| 기초금액 | ✅ | | |
| 예정가격 | ✅ | | |

## ⚠️ 자주 하는 실수

### 실수 1: "기초대비사정률을 공고 전체 동일값으로 통일해야 한다"
❌ **틀림**: 기초대비사정률은 업체마다 다른 값입니다!

### 실수 2: "사정률이 업체마다 다르다"
❌ **틀림**: 사정률은 공고 전체 동일값입니다!

### 실수 3: "투찰률이 뭔지 모호하다"
⚠️ **주의**: 문맥 확인 필요. 보통 기초대비투찰률이지만 때로는 낙찰하한율을 의미

## 🔢 실제 데이터 예시

### 공고: 20230905571-00
- 기초금액: 281,000,000원
- 예정가격: 281,520,600원
- 사정률: 0.18526% (모든 업체 동일)
- 낙찰하한가: 226,610,007원

### 업체별 데이터
| 업체 | 기초대비투찰률(%) | 예가대비투찰률(%) | 기초대비사정률(%) |
|-----|-----------------|-----------------|-----------------|
| 업체1 | 80.719 | 80.569 | 100.279 |
| 업체2 | 80.845 | 80.696 | 100.436 |
| 업체3 | 81.004 | 80.854 | 100.633 |

## 🤖 올바른 AI 분석 방법론 (2025 업데이트)

### ❌ 잘못된 AI 분석 접근

**문제 1: 발주처투찰률을 고정 기준으로 분석**
```
예: "87.745% 이상만 분석하도록 설정"
→ 복수예가의 무작위성을 무시함
→ 예정가격이 매번 달라지므로 고정 기준이 왜곡됨
```

**문제 2: 예가대비투찰률 기준 분석**
```
입찰 시점에 예정가격을 모르므로:
→ 예가대비투찰률을 계산할 수 없음
→ 이 값으로 전략을 세울 수 없음
```

**문제 3: 상위 구간만 분석 (미달 데이터 제외)**
```
→ 심리적 바닥선 분석 불가능
→ 경쟁사 회피 패턴 분석 불가능
```

### ✅ 올바른 AI 분석 접근

**핵심 원칙: 입찰 시점에 알 수 있는 정보만 사용**

입찰 시점에 알고 있는 정보:
- ✅ 기초금액 (공고에 명시)
- ✅ 낙찰하한율 (발주처별 고정값)
- ✅ 과거 입찰 데이터 (기초대비투찰률 분포)

입찰 시점에 모르는 정보:
- ❌ 예정가격 (15C4 = 1,365가지 경우의 수)
- ❌ 사정률 (예가추첨 결과)
- ❌ 낙찰하한가 (예정가격 × 낙찰하한율)

**정확한 AI 분석 방법:**
```
1. 같은 발주처투찰률 그룹의 과거 데이터 추출
   예: 87.745% 그룹 → 112개 공고, 7,175개 입찰

2. 1위 업체들의 기초대비투찰률 분석
   예: 평균 87.851%, 중앙값 87.843%

3. 기초금액을 기준으로 입찰가 계산
   예: 39,000,000원 × 0.87843 = 34,258,575원

4. 패턴 분석으로 차별화
   - 끝자리 000 회피 (50% 충돌)
   - 경쟁 밀도 높은 구간 회피
   - 심리적 바닥선 이상 유지
```

### 🎲 복수예가의 무작위성 문제

**15C4 = 1,365가지 경우의 수**

예가추첨 과정:
```
1. 기초금액 기준 ±3% 범위에서 15개 예비가격 생성
   예: 39,000,000원 → 37,830,000 ~ 40,170,000원

2. 이 중 4개를 무작위 추첨하여 평균
   → 15C4 = 1,365가지 조합

3. 예정가격 = 선택된 4개의 평균
   → 예측 불가능
```

**왜 예정가격 예측이 불가능한가:**
- 1,365가지 모든 경우가 동일 확률
- 예가추첨은 입찰 후에 진행
- 추첨 결과는 공개되지 않음 (사정률만 공개)

**예정가격 변동에 따른 낙찰하한가 변동:**
```
기초금액: 39,000,000원
발주처투찰률: 87.745%

Case 1: 예정가격 37,830,000원 (최소, -3%)
→ 낙찰하한가 = 37,830,000 × 0.87745 = 33,194,563원

Case 2: 예정가격 39,000,000원 (중간, 0%)
→ 낙찰하한가 = 39,000,000 × 0.87745 = 34,220,550원

Case 3: 예정가격 40,170,000원 (최대, +3%)
→ 낙찰하한가 = 40,170,000 × 0.87745 = 35,246,146원

차이: 2,051,583원 (5.3%)!
```

### 💡 왜 기초대비투찰률을 사용해야 하는가

**이유 1: 기초금액은 입찰 시 알고 있음**
```
공고문에 명시됨:
- 기초금액(원): 39,000,000원
- 예가범위: +2% ~ -2%
→ 기초금액은 확정값
```

**이유 2: 과거 1위들의 패턴이 일관성 있음**
```
87.745% 그룹 1위들의 기초대비투찰률:
- 평균: 87.851%
- 중앙값: 87.843%
- 표준편차: 0.503%
→ 일관된 분포를 보임
```

**이유 3: 예정가격 변동에도 전략이 유효함**
```
기초대비투찰률 87.843%로 입찰 시:
- 예정가격이 낮게 나와도: 낙찰하한가 대비 안전
- 예정가격이 높게 나와도: 경쟁력 유지
→ 예정가격 무작위성에 강건함
```

### ⚠️ 데이터 저장 형식 주의사항

**사정률 컬럼 저장 형식:**

데이터베이스에 저장된 "사정률" 값은 `100 + 실제사정률` 형식:

```
실제 사정률: 0.61358%
저장된 값: 100.61358%

실제 사정률: -0.44491%
저장된 값: 99.55508%

실제 사정률: 1.01983%
저장된 값: 101.01982%
```

**계산 시 주의:**
```python
# 저장된 값에서 실제 사정률 추출
실제사정률 = 데이터['사정률'] - 100

# 예시
저장값 = 100.61358
실제값 = 100.61358 - 100 = 0.61358%
```

**왜 이렇게 저장되는가:**
- 엑셀 파일에서 추출 시 백분율 형식 파싱 문제
- 100을 기준으로 ±2% 범위를 표현
- 전처리 시 이 형식 그대로 보존함

### 🎯 낙찰하한가의 동적 특성

**중요: 낙찰하한가는 예가추첨 후에 결정됨**

낙찰하한가 계산 공식:
```
낙찰하한가 = 예정가격 × (발주처투찰률 / 100)
```

**예정가격이 변하면 낙찰하한가도 변함:**

```
기초금액: 39,000,000원
발주처투찰률: 87.745%

시나리오 1 (예정가격 낮음):
- 예정가격: 38,220,000원
- 낙찰하한가: 33,536,139원
- 기초대비 낙찰하한율: 85.990%

시나리오 2 (예정가격 중간):
- 예정가격: 39,000,000원
- 낙찰하한가: 34,220,550원
- 기초대비 낙찰하한율: 87.745%

시나리오 3 (예정가격 높음):
- 예정가격: 39,780,000원
- 낙찰하한가: 34,904,961원
- 기초대비 낙찰하한율: 89.500%

낙찰하한가 변동폭: 1,368,822원 (4.1%)
```

**전략적 함의:**
1. 입찰 시 낙찰하한가를 정확히 알 수 없음
2. 기초대비투찰률로 입찰해야 모든 시나리오에 대응 가능
3. 예정가격이 낮게 나오면 유리, 높게 나오면 불리
4. 중앙값 (87.843%) 전략이 리스크 최소화

## 🚨 AI 분석 오류의 본질 (2025-10-26 업데이트)

### 문제의 핵심

**AI가 이렇게 잘못된 분석을 하는 이유 한 줄 요약:**

> "AI는 '예정가격(복수예비가격 평균)'이 변동된다는 개념 없이, 발주처 명시 투찰율(기초금액 기준)만을 고정 상수처럼 사용하기 때문입니다."

### AI가 범하는 치명적 오류

**잘못된 논리:**
```
입력 데이터:
- 기초금액 = 281,500,000원
- 발주처투찰율 = 87.745%
- 예정가격 = 281,734,375원

AI의 잘못된 추론:
→ "기초금액 대비 87.745%가 이미 낙찰 가능 최저율이다"
→ "그 이하 구간은 의미 없는 손실구간이다"
→ "87.745% 이상만 낙찰확률로 본다"
```

**왜 틀렸는가:**
- 발주처투찰율 87.745%는 **예정가격 대비** 최저 낙찰율
- 예정가격은 매번 달라지므로 (15C4 = 1,365가지)
- **기초대비 낙찰하한율도 매번 달라짐**
- 실제 낙찰은 기초대비 **80~82% 구간**에서 발생 가능

### 복수예가 구조의 정확한 이해

**수학적 정의:**

$$예정가격 = \frac{예비가격_1 + 예비가격_2 + 예비가격_3 + 예비가격_4}{4}$$

$$낙찰하한가 = 예정가격 \times \frac{발주처투찰율}{100}$$

**핵심 개념:**
```
예정가격이 변하면 → 낙찰하한가도 변함

예시 (발주처투찰율 87.745%):
- 예정가격 37,830,000원 → 낙찰하한가 33,194,563원 (기초대비 85.1%)
- 예정가격 39,000,000원 → 낙찰하한가 34,220,550원 (기초대비 87.7%)
- 예정가격 40,170,000원 → 낙찰하한가 35,246,146원 (기초대비 90.4%)

기초대비 낙찰하한율 변동폭: 5.3%!
```

**따라서:**
- 발주처투찰율 87.745%는 **고정값이 아님**
- 예정가격에 연동되는 **가변값**
- 기초대비로 환산하면 **85~90% 범위**로 변동

### 올바른 AI 분석 로직

**① 발주처투찰율을 확률 변수로 재정의**
```
❌ 잘못: 87.745%를 고정 상수로 사용
✅ 올바름: 예정가격 분포에 따라 변하는 확률 변수로 모델링
```

**② 몬테카를로 시뮬레이션 (10,000회 이상)**
```python
# 15개 예비가격 생성 (기초금액 ±3%)
예비가격 = np.linspace(기초금액 * 0.97, 기초금액 * 1.03, 15)

# 10,000회 시뮬레이션
for i in range(10000):
    # 4개 무작위 선택하여 평균
    예정가격 = np.mean(np.random.choice(예비가격, 4, replace=False))

    # 낙찰하한가 계산
    낙찰하한가 = 예정가격 * (발주처투찰율 / 100)

    # 기초대비 낙찰하한율 계산
    기초대비_낙찰하한율 = (낙찰하한가 / 기초금액) * 100
```

**③ 확률분포 분석**
```
시뮬레이션 결과:
- 예정가격 분포: 정규분포에 가까움
- 낙찰하한가 분포: 예정가격 × 0.87745
- 기초대비 낙찰하한율 분포: 85~90% 범위

실제 낙찰 구간:
- 과거 1위 데이터: 기초대비 80~90% 범위
- 중앙값: 87.843%
- 이것은 예정가격이 기초금액과 같을 때의 전략
```

**④ 예가대비 vs 기초대비 분석**
```
입찰 시점 정보:
✅ 알고 있음: 기초금액
❌ 모름: 예정가격 (15C4 = 1,365가지)

따라서:
✅ 기초대비투찰률 분석 가능
❌ 예가대비투찰률 분석 불가능

결론:
→ 과거 1위들의 "기초대비투찰률" 분포로 전략 수립
→ "예가대비투찰률"은 입찰 후에만 계산 가능
```

### 실제 낙찰 구간이 80~82%인 이유

**복수예가의 통계적 특성:**
```
1. 예정가격 분포가 정규분포에 가까움
2. 중앙값은 기초금액과 거의 같음
3. 따라서 낙찰하한가 중앙값 ≈ 기초금액 × 0.87745

하지만:
- 예정가격이 낮게 나올 확률: 50%
- 이 경우 낙찰하한가도 낮아짐
- 기초대비 80~82%로 입찰해도 낙찰 가능

결론:
→ "기초대비 80~82% 구간"이 실제 낙찰 구간
→ "87.745% 이상만 낙찰" 논리는 예정가격 고정 가정의 오류
```

### 몬테카를로 시뮬레이션의 중요성

**시각화할 내용:**
1. **예정가격 확률분포** (히스토그램)
2. **낙찰하한가 확률분포** (히스토그램)
3. **기초대비 낙찰하한율 분포** (히스토그램)
4. **과거 1위 데이터와 비교** (오버레이)

**얻을 수 있는 인사이트:**
- 예정가격 변동 범위 (±3% 내에서 실제 분포)
- 낙찰하한가 변동 범위 (약 2백만원)
- 기초대비 최적 입찰율 (과거 데이터 + 시뮬레이션)
- 리스크 평가 (각 입찰율별 낙찰 확률)

**시뮬레이션 없이는:**
- 예정가격 변동성 무시
- 고정 87.745% 기준 오류
- 실제 낙찰 구간 (80~82%) 놓침
- 리스크 과대평가/과소평가

## 📝 영구 기록 사항

이 정의를 절대 변경하지 마십시오. 혼동이 생길 때마다 이 문서를 참조하십시오.

**마지막 업데이트**: 2025년 10월
**작성 이유**:
- 계속되는 개념 혼동 방지
- AI 분석 방법론 오류 수정
- 복수예가 무작위성 정확한 이해
- 데이터 저장 형식 명시