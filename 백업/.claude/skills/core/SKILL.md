---
name: core
description: |
  복수예가입찰 AI 분석의 핵심 철학 및 개념 정의.
  "1위 예측 불가능 → 경쟁 회피가 핵심"

  AI 목표: max Σ P(예정가=y) × [1/N(y,x)] × R(x)
  - 모든 예정가 경우의 수에 대해
  - 그 예정가가 나올 확률 × 1위 확률 × 이익률
  - 총합 최대화

  3층 확률 게임:
  1. 예정가 형성 (15C4, 몬테카를로)
  2. 경쟁자 분포 (히트맵, 200명 이하 필터)
  3. 조건부 확률 (베이지안 최적화)

  핵심 원칙:
  - 1위 아니면 의미 없음 (2위=미달=0원)
  - 미달 리스크 무시 (실패=다음 기회)
  - 경쟁 밀도 역수 = 1위 확률
  - 기초대비투찰율 & 기초대비사정율 동시 분석

  Use when: 입찰 분석 시작 전, 전략 수립, 용어 확인
  THIS IS THE SINGLE SOURCE OF TRUTH.
---

# 복수예가입찰 AI 분석 핵심 철학

## ⚠️ 이 문서는 모든 입찰 분석의 철학적 기반입니다

> **"1위를 예측할 수 없다면, 경쟁을 회피하라"**
>
> 복수예가입찰에서 1위를 정확히 맞추는 것은 불가능하다.
> AI의 목표는 **"경쟁 밀도가 낮은 곳"**을 찾아
> **"1위 확률을 극대화"**하는 것이다.

---

## 1. 복수예가입찰의 본질

### 1위 예측은 불가능하다

```
15C4 = 1,365가지 예정가격 조합
→ 예정가는 무작위
→ 낙찰하한가도 무작위
→ "몇 %에 써야 1위?"는 답 없는 질문
→ AI는 1위 예측 포기
```

**2024년 데이터 증거:**
- 15만 개 기업 참여
- 대부분 성공률 0%
- 90% 이상이 성공률 4% 미만
- **로또보다 어려움**

### 1위 아니면 의미 없다

```
1위 = 수익
2위 = 0원
3위 = 0원
...
미달 = 0원

→ 2위든 100위든 미달이든 = 동일
→ 평균가(안전지대) = 안전하게 탈락
→ 경쟁 낮은 곳 공략 필수
```

**핵심 통찰:**
- 미달 46.2% vs 1위 1.56% (87.745% 그룹)
- 미달 확률이 1위 확률의 30배!
- **BUT 실패하면 다음 기회**
- → **미달 = 리스크 아님**
- → **1위 확률만 측정**

### 예정가는 대수의 법칙으로 중앙 수렴

```
업체 수 많음 (80개+)
→ 극단값 (98%, 102%) 확률 낮음
→ 예정가 분포: 정규분포 (중앙 100% 집중)
→ 실제 범위: 86.5~88.9% (5~95 percentile)

몬테카를로 시뮬레이션:
→ 반복 횟수 ↑
→ 중앙값 수렴도 ↑
→ 예정가 형성 확률 계산 가능
```

### 예정가 형성과 경쟁 밀도의 관계

**핵심 메커니즘:**

```
기초대비 87.40% 입찰
+ 예정가 87.30% 형성 (낮게 떨어짐)
→ 낙찰하한가 = 87.30% (예정가 기준)
→ 87.30~87.40% 구간에 10명만
→ 1위 확률 = 1/10 = 10% ✅

기초대비 88.00% 입찰
+ 예정가 87.99% 형성 (높게 떨어짐)
→ 낙찰하한가 = 87.99% (예정가 기준)
→ 87.99~88.00% 구간에 358명 몰림
→ 1위 확률 = 1/358 = 0.28% ❌
```

**통찰:**
- 예정가와 입찰 사이 "빈 공간" 넓어도 OK
- **중요한 건 그 구간에 경쟁자 적은가!**
- 경쟁 밀도 낮은 곳 = 1위 확률 10~30배

### 하한가 형성의 변동성

```
예정가 높게 형성 (기초 × 102%)
→ 낙찰하한가 = (기초 × 102%) × 0.87745 = 기초 × 89.5%
→ 기초대비 88%도 미달!
→ 87~88% 구간 대부분 탈락
→ 89%+ 입찰한 소수만 경쟁

예정가 낮게 형성 (기초 × 98%)
→ 낙찰하한가 = (기초 × 98%) × 0.87745 = 기초 × 85.99%
→ 기초대비 87%도 통과!
→ 87% 구간 업체들 경쟁

→ 미달은 어디서나 발생 (운)
→ 중요한 건 경쟁 밀도!
```

---

## 2. AI의 핵심 통찰: 8가지 관점

### 2-1. 통계적 이상 현상

```
87.745% 그룹 (n=7,175):
- 미달: 46.2%
- 1위: 1.56%
- 기타: 52.24%

→ 미달 확률이 1위 확률의 30배
→ "안전하게 실패" vs "위험하게 승리"
→ BUT 실패 = 다음 기회
→ 위험이랄 것도 없음
→ 1위 확률만 측정!
```

### 2-2. 엔트로피: 무질서 속의 기회

```
정보 이론:
H(x) = -Σ p(x) log p(x)

87.95-88.00% (358명): 낮은 엔트로피 (질서)
87.05-87.10% (44명): 높은 엔트로피 (무질서)

→ 낮은 엔트로피 = 예측 가능 = "안전지대"
→ 높은 엔트로피 = 예측 불가 = "무인지대"
→ 무질서 속에 기회!
```

### 2-3. 게임 이론: 내쉬 균형의 부재

```
87.843% (중앙값) = 모두 선택 → 확률 0%
→ 내쉬 균형 아님!

진짜 균형:
- 1/3: 87.3-87.5% (낮음)
- 1/3: 87.8-88.0% (중앙)
- 1/3: 88.3-88.5% (높음)

현실:
- 87.8-88.0%에 50% 집중
→ 비효율적 분포
→ 시장 비효율 = AI 기회
```

### 2-4. 팻 테일: 1위 분포 ≠ 최적 전략

```
1위 분포:
- 최소: 86.764% (-1.079% from 중앙)
- 최대: 89.672% (+1.829% from 중앙)
→ 오른쪽 꼬리 더 김 (비대칭)

BUT 경쟁 밀도:
- 87.0-87.5%: 평균 180명
- 88.0-88.5%: 평균 280명
→ 높은 쪽 1위 많지만 경쟁도 1.5배

→ 1위 많은 곳 ≠ 최적
→ 경쟁 낮은 곳 = 최적
```

### 2-5. 베이지안: 조건부 확률이 핵심

```
사전 확률 (몬테카를로):
P(예정가=87.5%) = 20%
P(예정가=88.0%) = 25%

사후 확률 (경쟁 밀도 고려):
P(1위 | 87.5% 입찰, 예정가=87.4%) = 1/200 = 0.5%
P(1위 | 88.0% 입찰, 예정가=87.9%) = 1/358 = 0.28%

→ 예정가 형성 확률 높아도
→ 경쟁 많으면 무의미
→ 조건부 확률 계산 필수!
```

### 2-6. 최적화 목적 함수 재정의

**현재 코드 (WRONG):**
```python
max E(x) - λf(x)
E(x) = P_win × R_profit
# 문제: P_win이 CDF 기반 (논리 반대)
```

**AI의 새로운 제안:**
```python
max Σ P(예정가=y) × [1/N(y,x)] × R(x)

여기서:
- P(예정가=y): 몬테카를로 분포
- N(y,x): y~x 구간의 경쟁자 수
- R(x): 이익률

즉:
"모든 가능한 예정가에 대해,
 그 예정가가 나올 확률 ×
 내가 그 구간에서 이길 확률 (1/경쟁자) ×
 이익률
 의 총합 최대화"
```

### 2-7. 동적 클러스터링: 메타 게임

```
매 입찰마다 80개+ 업체 이동
→ 고정된 최적해 없음
→ 2차 게임 (메타 전략)

AI가 봐야 할 것:
1. 시간별 클러스터 이동 패턴
2. 다음 입찰에 어디 갈지 예측
3. 그 반대편으로 이동
```

### 2-8. 1위 확률 = 경쟁 밀도 역수

```
88.0%: 1위 확률 = 1/358 = 0.28% ❌
87.5%: 1위 확률 = 1/200 = 0.50%
87.1%: 1위 확률 = 1/44 = 2.27% ✅

→ 경쟁 밀도 낮을수록
→ 1위 확률 기하급수적 증가 (8배!)
→ 미달 확률 무시
→ 경쟁 밀도 역수만 계산
```

---

## 3. 3층 확률 게임 구조

### 층별 목표 및 방법

**1층: 예정가 형성 (통제 불가)**
```
목표: 예정가 분포 파악
방법: 몬테카를로 시뮬레이션 (10,000회)
출력: P(예정가=y) 확률 분포
범위: 86.5~88.9% (5~95 percentile)
```

**2층: 경쟁자 분포 (데이터 분석 가능)**
```
목표: 경쟁 밀도 히트맵
방법: 0.05% 구간별 전체 경쟁자 수 계산
출력: N(x) = x 구간의 경쟁자 수
필터: 200명 이하 구간만 추출
```

**3층: 조건부 확률 (베이지안 최적화)**
```
목표: 예정가별 × 경쟁 밀도별 1위 확률
방법: 이중 루프 (예정가 × 입찰률)
출력: 기대 효용 최대화 입찰률
공식: max Σ P(y) × [1/N(y,x)] × R(x)
```

### 현재 코드 문제

```
✅ 1층: 구현됨 (몬테카를로)
⚠️  2층: 부분 구현 (히트맵만, 최적화 미연동)
❌ 3층: 없음 (조건부 확률 미계산)

→ Phase 9가 CDF 사용 (1위 분포 누적)
→ 논리 반대: "90%가 이하" ≠ "90% 확률"
→ 3층 구조로 완전 재작성 필요
```

---

## 4. 기초대비투찰율 & 기초대비사정율

### 핵심: 둘 다 "100분율"

```
기초금액 = 100 기준

기초대비사정율 = (예정가격 ÷ 기초금액) × 100
기초대비투찰율 = (투찰금액 ÷ 기초금액) × 100

→ 같은 스케일
→ 같은 계산식
→ 분자만 다름 (예정가 vs 투찰금액)
→ 직접 비교 가능
→ 상관관계 분석 필수
```

### 실제 데이터 예시

```
기초금액: 74,965,000원
예정가격: 75,424,975원
투찰금액: 66,192,000원

기초대비사정율 = 100.614%
기초대비투찰율 = 88.297%

사정율 - 투찰율 = 12.316%
투찰율 / 사정율 = 0.878
```

### 분석 시 함께 봐야 하는 이유

```
사정율 98.5% → 투찰율 87.8% 경향
사정율 101.2% → 투찰율 88.5% 경향

→ 사정율 높으면 투찰율도 높음
→ 사정율-투찰율 차이 = 업체 전략 패턴
→ 둘 다 기초 기준 → 예정가 변동 영향 제거
→ 상관관계 분석으로 업체 심리 파악
```

---

## 5. AI의 역할 재정의

### 통제 불가능한 것

```
✗ 예정가 (15C4, 대수의 법칙)
✗ 다른 업체 입찰률
✗ 미달 여부 (예정가 결과에 따름)
```

### 분석 가능한 것

```
✓ 7,175건 데이터에서 군집 패턴
✓ 0.05% 단위 경쟁 밀도 지도
✓ 매 입찰마다 80개+ 업체가 어디 몰리는지
```

### AI의 핵심 통찰

```
"최적해"를 모두가 찾으면 → 그곳이 최악
답은 "정답 찾기"가 아니라 "군중 피하기"
```

### 올바른 분석 접근

```
1. 경쟁 밀도 히트맵 (Phase 3)
   - 0.05% 구간별 전체 경쟁자 수
   - 200명 이하 구간 추출

2. 예정가 형성 범위 (몬테카를로)
   - 실제 범위: 86.5-88.9%
   - 극단값 희귀

3. 교집합 = 최적 구간
   - 경쟁 밀도 200 이하
   + 예정가 형성 가능 범위
   + 실제 입찰 업체 80개+ 고려
```

---

## 6. 핵심 결론

### AI의 목표

```
예측 (X) → 회피 (O)
평균 찾기 (X) → 군중 피하기 (O)
안전 (X) → 1위 확률 극대화 (O)

"경쟁 밀도 200명 이하 + 예정가 형성 가능 범위"
→ 이 교집합이 AI가 찾아야 할 답
```

### 측정 지표

```
❌ 미달 확률 (무의미, 다음 기회)
❌ 1위 분포 CDF (논리 반대)
❌ 평균값 근처 (경쟁 최고 밀집)

✅ 경쟁 밀도 역수 = 1위 확률
✅ 조건부 확률 (예정가별)
✅ 기대 효용 (확률×이익)
```

### 데이터 증거 (87.745% 그룹)

```
전체: 7,175개
미달: 3,312개 (46.2%)
1위: 112개 (1.56%)

1위 중:
- 87.745% 밑: 51개 (45.5%)
- 87.745% 위: 61개 (54.5%)
- 중앙값: 87.843%

경쟁 밀도:
- 87.05-87.10%: 44명 (VERY LOW)
- 87.3-87.5%: 196-227명 (MODERATE)
- 87.8-88.0%: 252-358명 (PEAK - 회피!)
- 88.45-88.5%: 127명 (현재 추천 - 1위 90% 이하)
```

---

## 7. 주요 용어 정의

### 기초금액 vs 예정가격 vs 투찰금액

```
기초금액: 발주처가 정한 기본 금액 (100% 기준)
예정가격: 15C4 추첨으로 결정된 금액 (98~102% 범위)
투찰금액: 업체가 실제 입찰한 금액
```

### 발주처투찰률 (낙찰하한율)

```
발주처가 정한 최소 낙찰률
예: 87.745%, 86.745%, 88.000%

중요: 예정가격 기준!
낙찰하한가 = 예정가격 × (발주처투찰률 / 100)
```

### 기초대비투찰률 & 기초대비사정률

```
기초대비투찰률 = (투찰금액 ÷ 기초금액) × 100
기초대비사정률 = (예정가격 ÷ 기초금액) × 100

→ 둘 다 기초금액 = 100 기준
→ 직접 비교 가능
→ 항상 함께 분석
```

### 예가대비투찰률

```
예가대비투찰률 = (투찰금액 ÷ 예정가격) × 100

→ 예정가는 입찰 시 모름
→ 분석용으로만 사용
→ 실전에선 기초대비투찰률 사용
```

---

## 8. 참고 문서

**필수 참조 순서:**
1. `/mnt/a/25/CLAUDE.md` - 전체 프로젝트 가이드
2. `/mnt/a/25/md파일/1.md` - 이론적 기반
3. `/mnt/a/25/.claude/skills/logic/SKILL.md` - 구현 상세
4. `/mnt/a/25/.claude/skills/report/SKILL.md` - 해석 방법

**Last Updated:** 2025-10-26
**Philosophy:** 경쟁 회피가 승리의 열쇠
