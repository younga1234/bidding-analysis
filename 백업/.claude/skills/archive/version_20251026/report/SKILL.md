---
name: bidding-report
description: |
  [분석 결과 리포팅] 입찰 분석 JSON 결과를 한글 리포트와 시각화로 변환합니다.

  기능:
  - JSON 분석 결과 파싱
  - 한글 요약 리포트 생성 (마크다운)
  - 추천 전략 비교표 생성
  - 경쟁 밀도 히트맵 시각화
  - 소수점 패턴 분포 차트
  - 끝자리 선호도 분석 그래프

  입력: bidding_analysis_*.json (logic skill 출력)
  출력:
  - report_*.md (한글 요약 리포트)
  - heatmap_*.png (경쟁 밀도 시각화)
  - patterns_*.png (소수점 패턴 차트)

  Use when: 분석 완료 후 결과 확인, 리포트 생성 필요 시
  (project)
---

# 입찰 분석 리포트 생성 Skill

## 목적

`bidding-logic` skill의 JSON 출력을 사용자 친화적인 한글 리포트로 변환합니다.

## 사용법

```bash
# Skill 호출
Skill tool → command: "bidding-report"

# 또는 직접 실행
python3 /mnt/a/25/.claude/skills/report/generate_report.py \
  --json-file /mnt/a/25/data분석/bidding_analysis_87745.json
```

## 출력 형식

### 1. 마크다운 리포트 (`report_87745.md`)

```markdown
# 입찰 분석 리포트

## 공고 정보
- 기초금액: 39,000,000원
- 발주처투찰률: 87.745%

## 1. 몬테카를로 시뮬레이션 (큰 그림)
- 기초대비 낙찰하한율 범위: 85.677% ~ 89.813%
- 변동폭: 4.137% (예정가격 무작위성)
- **추천 범위: 87.2% ~ 88.3%**

## 2. 과거 1위 분석 (실제 낙찰 패턴)
- 평균: 87.851%
- 중앙값: 87.843%
- 표준편차: 0.505%
- **67.9%가 87.3% ~ 88.3% 구간에 몰림**

## 3. 경쟁 밀도 (회피 구간)
⚠️ **절대 피해야 할 구간:**
- 87.65~87.70%: 7개 업체 충돌
- 87.85~87.90%: 6개 업체 충돌

✅ **안전 구간 (경쟁 0~1개):**
- 87.70~87.75%
- 88.75~88.80%

## 4. 소수점 패턴 (0.001% 차별화)
- **회피할 셋째 자리:** 8 (19개), 7 (15개), 1 (13개)
- **안전한 셋째 자리:** 4 (6개), 6 (9개), 0 (9개)

## 5. 끝자리 선호도
- **회피:** 000 (50%), 500 (15%)
- **안전:** 490, 959, 280 (각 2% 미만)

## 추천 전략 비교

| 순위 | 전략명 | 입찰률 | 입찰금액 | 리스크 | 충돌확률 | 추천 상황 |
|------|--------|--------|----------|--------|----------|----------|
| 1 | 중앙값 전략 | 87.844% | 34,259,160원 | 중간 | 낮음 | 균형잡힌 접근 |
| 2 | 저경쟁 구간 | 87.744% | 34,220,160원 | 높음 | 매우낮음 | 공격적 입찰 |
| 3 | 고안전 구간 | 88.044% | 34,337,160원 | 낮음 | 없음 | 보수적 접근 |

## 최종 추천

**상황별 추천:**
- 📊 **일반적인 경우:** 전략 1 (중앙값 전략) - 87.844%
- 🎯 **경쟁력 중시:** 전략 2 (저경쟁 구간) - 87.744%
- 🛡️ **안정성 중시:** 전략 3 (고안전 구간) - 88.044%

**핵심 포인트:**
1. 87.65~87.70% 구간은 절대 회피 (7개 충돌)
2. 소수점 셋째 자리는 4, 6, 0 사용
3. 끝자리 000, 500 회피
4. 0.001% 차이로도 당락 결정됨
```

### 2. 경쟁 밀도 히트맵 (`heatmap_87745.png`)

- X축: 기초대비투찰률 (0.05% 단위)
- Y축: 업체 수
- 색상: 붉은색 (위험) ~ 녹색 (안전)
- 주석: 회피 구간 표시

### 3. 소수점 패턴 차트 (`patterns_87745.png`)

- 3개 막대 그래프: 첫째/둘째/셋째 자리 분포
- 색상 구분: 회피(빨강) / 안전(녹색)

## 구현 스크립트

분석 스크립트: `/mnt/a/25/.claude/skills/report/generate_report.py`

## 주의사항

⚠️ **WSL 환경에서 한글 폰트 제한**
- 시각화 시 한글이 깨질 수 있음 (□ 표시)
- 마크다운 리포트는 항상 정상 작동
- 필요시 Windows에서 Jupyter로 재생성

⚠️ **JSON 파일 위치**
- logic skill 실행 후 생성된 JSON 파일 필요
- 경로: `/mnt/a/25/data분석/bidding_analysis_*.json`

## 성공 기준

✅ 마크다운 리포트 생성 완료
✅ 3가지 전략 비교표 포함
✅ 회피 구간과 안전 구간 명확히 표시
✅ 한글로 된 명확한 설명
